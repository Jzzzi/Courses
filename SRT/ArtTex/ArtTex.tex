% MIT License

% Copyright (c) 2022 Chiyuru

% Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), 
% to deal in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:

% The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

% 宏定义一些数学符号

\def\f#1#2{\frac{#1}{#2}}
\def\d#1{\dot{#1}}
\def\dd#1{\ddot{#1}}
\def\fd#1#2{\frac{d #1}{d #2}}
\def\fp#1#2{\frac{\partial #1}{\partial #2}}
\def\b#1{\boldsymbol{#1}}


\documentclass[UTF8]{ctexart}

\usepackage{amsmath}
\usepackage{cases}
\usepackage{cite}
\usepackage{graphicx}
\usepackage[margin=1in]{geometry}
\geometry{a4paper}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}

\title{SRT创新计划专项结题报告\\倒立摆控制}
\author{刘锦坤}
\date{\today}
\pagenumbering{arabic}

\begin{document}

%\fancyhead[L]{驰雨Chiyuru}
\fancyhead[C]{倒立摆控制}
\fancyfoot[C]{\thepage}

\maketitle
\tableofcontents
\newpage

\section{摘要}

本文主要总结了本次倒立摆项目中所做的工作。

\section{PD控制参数的理论计算}

在本次SRT项目中，选用PD方法来完成对倒立摆的控制，可以建立动力学模型，对PD控制器的参数进行理论计算。

\subsection{动力学方程}

记水平杆的质量$m_1$，长度$l_1$，树枝干的质量$m_2$，长度$l_2$，水平杆的转动角度为$\phi$，竖直杆的转动角度$\theta$，假设两杆的质量都是均匀分布。电机的驱动力矩为$\tau$，重力加速度为$g$，下面从第二类Lagrange方程出发推倒倒立摆的动力学方程。

水平杆的动能为

\begin{equation}
    T_1 = \f 1 6 m_1 l_1^2 {\d{\phi}}^2
\end{equation}

竖直杆的动能为为质心动能和相对之心动能之和，其质心速度为：

\begin{equation}
    \vec v = -\f 1 2 l_2 \d{\phi} sin \theta \hat x
    +(\d{\phi} l_1+\f 1 2 l_2 \d{\theta} cos \theta )\hat y
    - \f 1 2 l_2 \d{\theta} sin \theta \hat z 
\end{equation}

故其质心动能为

\begin{equation}
    T_{2c} = \f 1 2 m_2 \vec v^2 
    = 
\end{equation}


\subsection{简化动力学方程}

在倒立摆控制在倒立的稳定状态时，由于水平杆转动角度较小，因此可以认为稳定态附近进行稳定控制时，水平旋转杆的外端点可以视为一个平动参照系，原模型可以简化为竖直摆铰接在一个平动的底座上，并且有一个力$F$可以驱动平动的底座：

\begin{center}
    Change the picture by yourself！
%    \includegraphics{picture/example.png}
\end{center}

其中$x$为水平底座的位移，$\theta$为竖直杆的倾角，并记$m_b$为水平底座的质量，$m_c$为竖直杆的质量，$l_b$为水平杆的长度，$l_c$为竖直杆的长度，$F$为驱动水平杆外端点的作用力，$g$为重力加速度，根据第二类Lagrange方程，可以得到：

\begin{equation}
    \begin{cases}
        (m_b+m_c) \dd{x}-\f{1}{2} m_b l \dd{\theta}cos\theta+\f 1 2 m_b l {\d{\theta}}^2 sin\theta=F\\
        \f 1 3 m_b l^2 \dd{\theta}-\f 1 2 m_b l \dd{x} cos\theta-\f 1 2 m_b g l sin\theta = 0 
    \end{cases}
\end{equation}

\noindent 对于倒立摆的控制，应该是在$\theta = 0$的附近进行控制，因此可以对上述方程在$\theta = 0$进行线性化处理，得到：

\begin{equation}
    \begin{cases}
        (m_b+m_c) \dd{x}-\f{1}{2} m_b l \dd{\theta} = F\\
        \f 1 3 m_b l^2 \dd{\theta}-\f 1 2 m_b l \dd{x} -\f 1 2 m_b g l \theta = 0 
    \end{cases}
\end{equation}

\noindent 对于上述方程，记广义坐标$\b{q}=[x,\theta]^T$，可以写为矩阵形式：

\begin{equation}
    \b{M} \b{\dd q} + \b{K} \b{q} = \b{F}
\end{equation}

\noindent 其中

\begin{equation}
    \b{M} = \begin{bmatrix}
        m_b+m_c & -\f{1}{2} m_b l\\
        -\f{1}{2} m_b l & \f{1}{3} m_b l^2
    \end{bmatrix},
    \b{K} = \begin{bmatrix}
        0 & 0\\
        0 & \f{1}{2} m_b g l
    \end{bmatrix},
    \b{F} = \begin{bmatrix}
        F\\
        0
    \end{bmatrix}
\end{equation}

\noindent 这即倒立摆的动力学方程。

\subsection{本征模块的计算}
对于(3)式，可以求解本征模块，得到：
实验仪器2使用方法可参考说明书。


\section{实验原理}

\subsection{xxx方程}
在xx，xxx，xxxx条件下，考察条件为xx的xx的情况，利用xxxx定律在无位移的水平方向和有位移的竖直方向分别列出以下方程：

\begin{numcases}{}
    T_2cos\alpha_2 - T_1cos\alpha_1 = 0 \\
    T_2sin\alpha_2 - T_1sin\alpha_1 = \rho dx\frac{\partial^2y }{\partial x^2} 
\end{numcases}

\subsection{xxx情况下的边界条件和xx现象}
xxxx时发生xxxx现象。由xxx方程可知，xxx波形为$y^+=f(vt+x)$，xxx波形为$y^-=f(vt-x)$。

\subsection{xx在xxx条件下的xxx现象}
Complete by yourself!


\section{实验过程与数据分析}
\subsection{A.在xx条件下测量xxx}
\subsubsection{$a1. $计算出xx的电阻和电感}
在xx上将xx的两端串联xx和xx相连，将xx的两端串联进xx，分别将xx接在$L_1$，$L_2$，xx的两端测量xx并记录。
\subsubsection{$a2. $Complete by yourself!}
Complete by yourself!
\subsubsection{$a3. $Complete by yourself!}
实验得到的数据如下：

\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
 \hline
线圈名称 & R'(Ω) & Va(V) & V(V) & Vr'(V) & Vo(V)\\
 \hline
线圈1(空气芯) & 123 & 456 & 789 & 012 & 345\\
 \hline
线圈2(空气芯) & 123 & 456 & 789 & 012 & 345\\
 \hline
线圈3(铝芯) & 123 & 456 & 789 & 012 & 345\\
 \hline
线圈4(铝芯) & 123 & 456 & 789 & 012 & 345\\
 \hline
\end{tabular}
\end{center}

\subsection{展示一下行间公式}
\subsubsection{行间公式}
% 行间公式用 $$ $$ 或者 \[ \] 来框住都可以，但在 LaTeX 中前者会改变行文的默认行间距，因此不推荐采用。
\paragraph{}这是一个不确定度计算。
\[
U_k=tinv(x,y)×s_k=xxx
\]
\subsubsection{相对于行内公式}
这是一个不确定度计算：$U_k=tinv(x,y)×s_k=xxx$


\section{分析与讨论}

\subsection{误差分析}

\subsubsection{实验中的系统误差}
来自xxx的精度影响。

受空间内xx与xx的干扰。

\subsubsection{实验中的偶然误差}
接线时可能有xxx情况，导致xxx。xx上的xx在某情况下有xx的问题存在，经反复调整后得以正常测量。

\subsection{实验后的思考}
可说明自己做本实验的总结、收获和体会，对实验中发现的问题提出自己的建议。

\newpage
%图一般很大，建议换页。
\section{原始数据}
\begin{center}
    Change the picture by yourself！
    
    
%    \includegraphics{picture/example.png}
\end{center}



\bibliographystyle{plain}
\bibliography{./template}  %bib文件名

\end{document}